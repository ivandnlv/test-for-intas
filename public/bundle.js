(()=>{"use strict";var e={417:(e,t,n)=>{n.r(t)},294:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.mainEl=t.asideChange=void 0;const s=n(969),i=n(72);n(417);const a=document.createElement("div");t.mainEl=a,a.classList.add("main");const d=document.querySelector(".wrapper");d&&d.append(a),window.addEventListener("DOMContentLoaded",s.renderInitialMain);const r=document.querySelector(".aside"),o=document.querySelectorAll(".aside__top-btn"),c=document.querySelectorAll(".aside__top");o.forEach((e=>{e.addEventListener("click",(()=>{l()}))}));const l=()=>{c.forEach((e=>{e.classList.contains("_hidden")?(e.classList.remove("_hidden"),e.classList.add("_opened")):(e.classList.remove("_opened"),e.classList.add("_hidden"))})),r&&(r.classList.toggle("_opened"),i.testNames||(0,i.fetchAllData)())};t.asideChange=l},361:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,a){function d(e){try{o(s.next(e))}catch(e){a(e)}}function r(e){try{o(s.throw(e))}catch(e){a(e)}}function o(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(d,r)}o((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.onTimerStart=t.onFormSubmit=t.onFormReset=t.onFormClose=t.onFormChange=t.changeTimer=t.changeTestStopped=t.changeTestData=t.changeIsMobile=t.changeTestLoading=t.clearTestData=t.addListenersToTitles=t.timer=t.testStopped=t.test=t.data=t.testNames=t.testData=t.isMobile=t.clearTitles=void 0;const i=n(294),a=n(72);Object.defineProperty(t,"test",{enumerable:!0,get:function(){return a.test}}),Object.defineProperty(t,"data",{enumerable:!0,get:function(){return a.data}}),Object.defineProperty(t,"testNames",{enumerable:!0,get:function(){return a.testNames}});const d=n(969);let r=!1,o=!1;t.isMobile=o;let c="00:00:00";t.timer=c;let l=!0;t.testStopped=l;let m=null;t.testData=m,t.changeTimer=e=>{t.timer=c=e},t.changeTestData=e=>{t.testData=m=e},t.changeTestStopped=e=>{t.testStopped=l=e},t.changeTestLoading=e=>r=e,t.changeIsMobile=e=>{t.isMobile=o=e},t.onFormSubmit=(e,n)=>{e.preventDefault();let s=[];a.test&&(a.test.item.questions.forEach(((e,t)=>{var i;const a=`question${t+1}`,d=n.elements;s.push({questionText:e.text,questionTrueValue:e.variants[e.trueIndex],questionValue:null!==(i=e.variants[d[a].value])&&void 0!==i?i:""})})),localStorage.setItem(`${a.test.id}`,JSON.stringify({questionsArr:s,timer:c})),t.testData=m=s,(0,d.renderTestFinished)())},t.onFormReset=(e,t)=>{e.reset(),a.test&&(t.textContent=`0/${a.test.item.questions.length}`)},t.onTimerStart=e=>{const n=c.split(":"),s=n[2],i=n[1],a=n[0];Number(s)<60?n[2]=Number(s)<9?`0${Number(s)+1}`:`${Number(s)+1}`:Number(i)<60?(n[2]="00",n[1]=Number(i)<9?`0${Number(i)+1}`:`${Number(i)+1}`):n[0]=Number(i)<9?`0${Number(a)+1}`:`${Number(a)+1}`,t.timer=c=n.join(":"),e.textContent=c},t.onFormChange=(e,t)=>{let n=[];a.test&&(a.test.item.questions.forEach(((t,s)=>{const i=`question${s+1}`;e.elements[i].value&&n.push(e.elements[i].value)})),t.textContent=`${n.length}/${a.test.item.questions.length}`)},t.onFormClose=()=>{(0,d.renderModal)("Вы уверены что хотите выйти?","Все результаты будут сброшены")},t.clearTestData=()=>{m&&a.test&&(localStorage.removeItem(`${a.test.id}`),t.testData=m=null,t.timer=c="00:00:00",(0,d.renderTest)())},t.clearTitles=()=>{const e=document.querySelectorAll(".aside__list-item");e&&e.forEach((e=>e.classList.remove("_active")))},t.addListenersToTitles=()=>{const e=document.querySelectorAll(".aside__list-item");e&&e.forEach((t=>{t.addEventListener("click",(()=>{e.forEach((e=>{e.classList.remove("_active")})),t.classList.add("_active"),t.dataset.id&&u(t.dataset.id)}))}))};const u=e=>s(void 0,void 0,void 0,(function*(){if(!r){o&&(0,i.asideChange)();const n=localStorage.getItem(`${e}`);n?(t.testData=m=JSON.parse(n).questionsArr,t.timer=c=JSON.parse(n).timer,(0,d.renderLoadingTestFinished)(),yield(0,a.fetchTestById)(e),(0,d.renderTestFinished)()):((0,d.renderLoadingTestDescription)(),yield(0,a.fetchTestById)(e),(0,d.renderTestDescription)())}}))},706:function(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,i)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(26),t)},26:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createTestHeader=void 0;const s=n(361),i=document.body.clientWidth,a="Сбросить все ответы",d='<i class="fa-solid fa-ban fa-xl"></i>';window.addEventListener("resize",(()=>{const e=document.body,t=e.clientWidth,n=e.querySelector("#resetTest");t<=710?((0,s.changeIsMobile)(!0),n&&(n.innerHTML=d)):((0,s.changeIsMobile)(!1),n&&(n.innerHTML="",n.textContent=a))})),t.createTestHeader=()=>{var e;const t=document.createElement("div");if(t.classList.add("main__header"),s.test){const n=document.createElement("span");n.classList.add("main__header-subtitle"),n.textContent="Выход",n.id="testClose",n.addEventListener("click",(()=>{(0,s.onFormClose)()}));const r=document.createElement("span");r.classList.add("main__header-subtitle","_hidden"),r.id="testClose",r.innerHTML='<i class="fa-solid fa-square-xmark fa-xl"></i>',r.addEventListener("click",(()=>{(0,s.onFormClose)()}));const o=document.createElement("h1");o.classList.add("main__header-title"),o.textContent=null!==(e=s.test.item.name)&&void 0!==e?e:"Тест";const c=document.createElement("div");c.classList.add("main__header-func");const l=document.createElement("span");l.classList.add("main__header-subtitle"),l.id="resetTest";const m=document.createElement("span");m.classList.add("main__header-subtitle"),m.id="testCounter",m.textContent=`0/${s.test.item.questions.length}`;const u=document.createElement("span");if(u.classList.add("main__header-subtitle"),u.id="testTimer",u.textContent=s.timer,i>=710?l.textContent=a:l.innerHTML=d,!s.testStopped){const e=setInterval((()=>{(0,s.onTimerStart)(u),s.testStopped&&clearInterval(e)}),1e3)}c.append(r,l,m,u),t.append(n,o,c)}return t}},72:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,a){function d(e){try{o(s.next(e))}catch(e){a(e)}}function r(e){try{o(s.throw(e))}catch(e){a(e)}}function o(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(d,r)}o((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.fetchTestById=t.fetchAllData=t.test=t.testNames=t.data=void 0;const i=n(969),a=n(361);t.data=null,t.testNames=null,t.test=null;const d="https://64bf6c1e5ee688b6250d63ba.mockapi.io/tests/items";t.fetchAllData=()=>s(void 0,void 0,void 0,(function*(){try{(0,i.renderLoadingTitle)(),(0,a.changeTestLoading)(!0);const e=yield fetch(d).then((e=>e.json()));e&&(t.data=e,t.testNames=t.data.map((e=>e.item.name)),(0,i.renderTitles)())}catch(e){(0,i.renderErrorTitle)(),console.log("Произошла ошибка: ",e)}finally{(0,a.changeTestLoading)(!1)}})),t.fetchTestById=e=>s(void 0,void 0,void 0,(function*(){try{const n=yield fetch(`${d}/${e}`).then((e=>e.json()));n&&(t.test=n)}catch(e){console.log("Произошла ошибка!",e)}}))},969:function(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,i)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(35),t),i(n(390),t),i(n(677),t),i(n(538),t),i(n(328),t),i(n(100),t),i(n(879),t),i(n(75),t)},75:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.renderErrorTitle=void 0,t.renderErrorTitle=()=>{const e=document.querySelector(".aside__list");e&&(e.innerHTML="<p>Произошла ошибка при загрузке тестов, попробуйте перезагрузить страницу и проверьте, есть ли у вас доступ в интернет</p>")}},35:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.renderInitialMain=void 0;const s=n(294),i=n(361);t.renderInitialMain=()=>{(0,i.changeTimer)("00:00:00"),(0,i.changeTestStopped)(!0),(0,i.changeTestData)(null),(0,i.clearTitles)(),s.mainEl&&(s.mainEl.innerHTML="",s.mainEl.innerHTML='\n            <div class="main__wrapper main-initial">\n              <span class="main__intital-text">Выберите тест из списка</span>\n            </div>\n    ')}},390:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.renderLoadingTitle=t.renderLoadingTestFinished=t.renderLoadingTestDescription=void 0;const s=n(294);t.renderLoadingTitle=()=>{const e=document.querySelector(".aside__list");e&&(e.innerHTML="<p>Тесты загружаются...</p>")},t.renderLoadingTestDescription=()=>{const e=document.createElement("div");e.classList.add("main__wrapper","main-selected"),e.innerHTML='\n\t\t<header class="main__header">\n            <span class="main__header-subtitle">Описание</span>\n        </header>\n        <div class="divider main-selected__divider"></div>\n        <div class="main-selected__test">\n        \t<p class="main-selected__test-description">\n            \tЗагрузка теста...\n            </p>\n\t\t    </div>\n\t',s.mainEl&&(s.mainEl.innerHTML="",s.mainEl.append(e))},t.renderLoadingTestFinished=()=>{const e=document.createElement("div");e.classList.add("main__wrapper","main-finished"),e.innerHTML='\n\n  <header class="main__header">\n            <h1 class="main__header-title">Загрузка...</h1>\n          </header>\n          <div class="divider"></div>\n          <div class="main-finished__content">\n            <div class="main-finished__content-top">\n              <h2>Загрузка результатов...</h2>\n            </div>\n          </div>\n  ',s.mainEl&&(s.mainEl.innerHTML="",s.mainEl.append(e))}},879:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.renderModal=void 0;const s=n(35);t.renderModal=(e,t)=>{const n=document.createElement("div");n.classList.add("modal"),n.innerHTML=`\n\t<div class="modal__wrapper">\n          <span class="modal__title">${e}</span>\n          <p class="modal__description">${t}</p>\n          <div class="modal__btns">\n            <button class="btn outlined red modal__btns-close">Выход</button>\n            <button class="btn red modal__btns-cancel">Отмена</button>\n          </div>\n        </div>\n\t`;const i=n.querySelector(".modal__btns-close"),a=n.querySelector(".modal__btns-cancel");i&&n&&i.addEventListener("click",(()=>{n.parentNode&&(n.parentNode.removeChild(n),(0,s.renderInitialMain)())})),a&&a.addEventListener("click",(()=>n.parentNode&&n.parentNode.removeChild(n))),document.body.prepend(n)}},677:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.renderTest=void 0;const s=n(294),i=n(361),a=n(706);t.renderTest=()=>{const e=()=>{const e=document.querySelectorAll(".main-started__form-question__wrapper");e&&e.forEach((e=>{e&&(e.style.flexDirection="row",e.clientHeight>=53?e.style.flexDirection="column":e.style.flexDirection="row")}))};window.addEventListener("resize",e),(0,i.changeTimer)("00:00:00"),(0,i.changeTestStopped)(!1);const t=document.createElement("div");t.classList.add("main__wrapper","main-started");const n=(0,a.createTestHeader)();t.append(n);const d=n.querySelector("#resetTest"),r=n.querySelector("#testCounter"),o=document.createElement("div");o.classList.add("main-started__content");const c=document.createElement("form");c.action="#",c.classList.add("main-started__form"),d&&d.addEventListener("click",(()=>(0,i.onFormReset)(c,r))),i.test&&i.test.item.questions.forEach((e=>{const t=document.createElement("fieldset");t.classList.add("main-started__form-question");const n=document.createElement("div");n.classList.add("main-started__form-question__wrapper"),e.variants.forEach(((t,s)=>{const i=document.createElement("div");i.classList.add("main-started__form-question__answer");const a=`question${e.id}answer${s+1}`;i.innerHTML=`\n          <input type="radio" value="${s}" name="question${e.id}" id="${a}" />\n          <label for="${a}">${t}</label>\n        `,n.append(i)})),t.innerHTML=`\n       <legend class="main-started__form-question__title">${e.id}. ${e.text}</legend>\n      `,t.append(n),c.append(t)}));const l=document.createElement("div");l.classList.add("divider");const m=document.createElement("button");m.classList.add("btn","outlined","red"),m.textContent="Завершить",c.append(l,m),o.append(c),t.append(o),c.addEventListener("submit",(e=>(0,i.onFormSubmit)(e,c))),c.addEventListener("change",(()=>(0,i.onFormChange)(c,r))),s.mainEl&&(s.mainEl.innerHTML="",s.mainEl.append(t)),e()}},538:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.renderTestDescription=void 0;const s=n(294),i=n(361),a=n(969);t.renderTestDescription=()=>{if((0,i.changeTimer)("00:00:00"),(0,i.changeTestStopped)(!0),i.test){const e=document.createElement("div");e.classList.add("main__wrapper","main-selected"),e.innerHTML=`\n      <header class="main__header">\n              <span class="main__header-subtitle">Описание</span>\n          </header>\n          <div class="divider main-selected__divider"></div>\n          <div class="main-selected__test">\n            <p class="main-selected__test-description">\n                ${i.test.item.description}\n              </p>\n      </div>\n    `;const t=e.querySelector(".main-selected__test"),n=document.createElement("div");n.classList.add("main-selected__test-btns");const d=document.createElement("button");d.classList.add("btn","main-selected__test-btn"),d.textContent="Начать";const r=document.createElement("button");r.classList.add("btn","outlined","main-selected__test-btn"),r.textContent="Отмена",d.addEventListener("click",a.renderTest),r.addEventListener("click",a.renderInitialMain),n.append(d,r),t&&t.append(n),s.mainEl&&(s.mainEl.innerHTML="",s.mainEl.append(e))}}},328:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.renderTestFinished=void 0;const s=n(294),i=n(706),a=n(969),d=n(361);t.renderTestFinished=()=>{if((0,d.changeTestStopped)(!0),d.testData){const e=document.createElement("div");e.classList.add("main-finished__content");const t=d.testData.filter((e=>e.questionValue&&e.questionValue.length)).length,n=d.testData.length,a=document.createElement("div");a.classList.add("main__wrapper","main-finished");const r=(0,i.createTestHeader)(),o=r.querySelector("#testCounter");o&&(o.textContent=`${t<10?"0"+t.toString():t}/${n<10?"0"+n.toString():n}`);const c=document.createElement("div");c.classList.add("divider"),a.append(r,c);const l=document.createElement("div");l.classList.add("main-finished__content-top"),l.innerHTML=`\n      <h2>Тест завершен</h2>\n      <p>Вы ответили на ${t} из ${n} вопросов.</p>\n    `;const m=document.createElement("span");m.classList.add("main-finished__content-title"),m.textContent="Ваши ответы";const u=document.createElement("ol");u.classList.add("main-finished__list"),d.testData.forEach(((e,t)=>{const n=document.createElement("li");n.classList.add("main-finished__list-item"),n.innerHTML=`\n        <span class="main-finished__list-item-title">${t+1}. ${e.questionText}</span>\n        <div class="main-finished__list-item-answers">\n            <span>Правильный ответ: ${e.questionTrueValue}</span>\n            <span>Вы ответили: ${e.questionValue&&e.questionValue.length?e.questionValue:"не ответили"}</span>\n        </div>\n      `,u.append(n)})),e.append(l,m,u);const p=document.createElement("div");p.classList.add("divider"),a.append(e,p);const _=document.createElement("button");_.classList.add("btn","red","outlined","main-finished__btn"),_.textContent="Пройти тест еще раз",_.addEventListener("click",d.clearTestData),a.append(_),s.mainEl&&(s.mainEl.innerHTML="",s.mainEl.append(a))}else(0,a.renderInitialMain)()}},100:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.renderTitles=void 0;const s=n(361);t.renderTitles=()=>{const e=document.querySelector(".aside__list");e&&s.testNames&&(e.innerHTML="",s.testNames.forEach(((t,n)=>{if(s.testNames&&s.data){const i=document.createElement("li");i.classList.add("aside__list-item"),i.dataset.id=s.data[n].id,i.textContent=t,e.append(i),n===s.testNames.length-1&&(0,s.addListenersToTitles)()}})))}}},t={};function n(s){var i=t[s];if(void 0!==i)return i.exports;var a=t[s]={exports:{}};return e[s].call(a.exports,a,a.exports,n),a.exports}n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(294)})();